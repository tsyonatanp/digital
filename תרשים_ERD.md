# ðŸ—‚ï¸ ×ª×¨×©×™× ERD - ×œ×•×— ×ž×•×“×¢×•×ª ×“×™×’×™×˜×œ×™×ª

## ðŸ“Š Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  ðŸ¢ USERS (×ž×©×ª×ž×©×™×/×‘× ×™×™× ×™×)                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ PK: id (UUID)                                                      â”‚   â”‚
â”‚  â”‚ email (VARCHAR(255)) UNIQUE                                        â”‚   â”‚
â”‚  â”‚ password_hash (VARCHAR(255))                                       â”‚   â”‚
â”‚  â”‚ street_name (VARCHAR(255))                                         â”‚   â”‚
â”‚  â”‚ building_number (VARCHAR(50))                                      â”‚   â”‚
â”‚  â”‚ management_company (VARCHAR(255))                                  â”‚   â”‚
â”‚  â”‚ contact_person (VARCHAR(255))                                      â”‚   â”‚
â”‚  â”‚ contact_phone (VARCHAR(50))                                        â”‚   â”‚
â”‚  â”‚ contact_email (VARCHAR(255))                                       â”‚   â”‚
â”‚  â”‚ is_super_admin (BOOLEAN)                                           â”‚   â”‚
â”‚  â”‚ created_at (TIMESTAMP)                                             â”‚   â”‚
â”‚  â”‚ updated_at (TIMESTAMP)                                             â”‚   â”‚
â”‚  â”‚ last_login (TIMESTAMP)                                             â”‚   â”‚
â”‚  â”‚ is_active (BOOLEAN)                                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                      â”‚
â”‚                                    â”‚ 1:N                                  â”‚
â”‚                                    â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ðŸ“¢ NOTICES (×”×•×“×¢×•×ª)                                                 â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚ â”‚ PK: id (UUID)                                              â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ FK: user_id (UUID) â†’ users.id                              â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ message_text (TEXT)                                        â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ start_date (TIMESTAMP)                                     â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ end_date (TIMESTAMP)                                       â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ is_active (BOOLEAN)                                        â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ priority (INTEGER)                                         â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ created_at (TIMESTAMP)                                     â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ updated_at (TIMESTAMP)                                     â”‚     â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                      â”‚
â”‚                                    â”‚ 1:N                                  â”‚
â”‚                                    â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ðŸ–¼ï¸ IMAGES (×ª×ž×•× ×•×ª)                                                  â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚ â”‚ PK: id (UUID)                                              â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ FK: user_id (UUID) â†’ users.id                              â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ file_name (VARCHAR(255))                                   â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ file_path (VARCHAR(500))                                   â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ file_size (INTEGER)                                        â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ mime_type (VARCHAR(100))                                   â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ display_order (INTEGER)                                    â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ start_date (TIMESTAMP)                                     â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ end_date (TIMESTAMP)                                       â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ is_active (BOOLEAN)                                        â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ created_at (TIMESTAMP)                                     â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ updated_at (TIMESTAMP)                                     â”‚     â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                      â”‚
â”‚                                    â”‚ 1:1                                  â”‚
â”‚                                    â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ðŸŽ¨ STYLES (×¢×™×¦×•×‘×™×)                                                 â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚ â”‚ PK: id (UUID)                                              â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ FK: user_id (UUID) â†’ users.id                              â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ background_color (VARCHAR(7))                              â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ text_color (VARCHAR(7))                                    â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ layout_type (VARCHAR(50))                                  â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ text_size (VARCHAR(20))                                    â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ weather_enabled (BOOLEAN)                                  â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ news_enabled (BOOLEAN)                                     â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ slide_duration (INTEGER)                                   â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ created_at (TIMESTAMP)                                     â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ updated_at (TIMESTAMP)                                     â”‚     â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  ðŸŒ¤ï¸ WEATHER_CACHE (×ž×–×’ ××•×•×™×¨)                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ PK: id (UUID)                                                      â”‚   â”‚
â”‚  â”‚ location (VARCHAR(255))                                            â”‚   â”‚
â”‚  â”‚ weather_data (JSONB)                                               â”‚   â”‚
â”‚  â”‚ expires_at (TIMESTAMP)                                             â”‚   â”‚
â”‚  â”‚ created_at (TIMESTAMP)                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  ðŸ“° NEWS_SOURCES (×ž×§×•×¨×•×ª ×—×“×©×•×ª)                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ PK: id (UUID)                                                      â”‚   â”‚
â”‚  â”‚ name (VARCHAR(255))                                                â”‚   â”‚
â”‚  â”‚ rss_url (VARCHAR(500))                                             â”‚   â”‚
â”‚  â”‚ is_active (BOOLEAN)                                                â”‚   â”‚
â”‚  â”‚ created_at (TIMESTAMP)                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                      â”‚
â”‚                                    â”‚ 1:N                                  â”‚
â”‚                                    â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ðŸ“‹ NEWS_CACHE (×—×“×©×•×ª)                                               â”‚   â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚ â”‚ PK: id (UUID)                                              â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ FK: source_id (UUID) â†’ news_sources.id                     â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ title (VARCHAR(500))                                       â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ content (TEXT)                                             â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ url (VARCHAR(500))                                         â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ published_at (TIMESTAMP)                                   â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ expires_at (TIMESTAMP)                                     â”‚     â”‚   â”‚
â”‚  â”‚ â”‚ created_at (TIMESTAMP)                                     â”‚     â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ”— ×§×©×¨×™× ×‘×™×Ÿ ×”×˜×‘×œ××•×ª

### ×§×©×¨×™× ×¢×™×§×¨×™×™×:

1. **USERS â†’ NOTICES** (1:N)
   - ×ž×©×ª×ž×© ××—×“ ×™×›×•×œ ×œ×”×™×•×ª ×‘×¢×œ ×ž×¡×¤×¨ ×”×•×“×¢×•×ª
   - ×›×œ ×”×•×“×¢×” ×©×™×™×›×ª ×œ×ž×©×ª×ž×© ××—×“ ×‘×œ×‘×“

2. **USERS â†’ IMAGES** (1:N)
   - ×ž×©×ª×ž×© ××—×“ ×™×›×•×œ ×œ×”×™×•×ª ×‘×¢×œ ×ž×¡×¤×¨ ×ª×ž×•× ×•×ª
   - ×›×œ ×ª×ž×•× ×” ×©×™×™×›×ª ×œ×ž×©×ª×ž×© ××—×“ ×‘×œ×‘×“

3. **USERS â†’ STYLES** (1:1)
   - ×ž×©×ª×ž×© ××—×“ ×™×›×•×œ ×œ×”×™×•×ª ×‘×¢×œ ×¢×™×¦×•×‘ ××—×“ ×‘×œ×‘×“
   - ×›×œ ×¢×™×¦×•×‘ ×©×™×™×š ×œ×ž×©×ª×ž×© ××—×“ ×‘×œ×‘×“

4. **NEWS_SOURCES â†’ NEWS_CACHE** (1:N)
   - ×ž×§×•×¨ ×—×“×©×•×ª ××—×“ ×™×›×•×œ ×œ×”×™×•×ª ×‘×¢×œ ×ž×¡×¤×¨ ×¤×¨×™×˜×™ ×—×“×©×•×ª
   - ×›×œ ×¤×¨×™×˜ ×—×“×©×•×ª ×©×™×™×š ×œ×ž×§×•×¨ ××—×“ ×‘×œ×‘×“

### ×§×©×¨×™× ×ž×©× ×™×™×:

- **WEATHER_CACHE** - ×˜×‘×œ×” ×¢×¦×ž××™×ª ×œ××—×¡×•×Ÿ × ×ª×•× ×™ ×ž×–×’ ××•×•×™×¨
- **NEWS_SOURCES** - ×˜×‘×œ×” ×¢×¦×ž××™×ª ×œ× ×™×”×•×œ ×ž×§×•×¨×•×ª ×—×“×©×•×ª

## ðŸ“Š ××™× ×“×§×¡×™× ×ž×•×ž×œ×¦×™×

### ××™× ×“×§×¡×™× ×¨××©×™×™×:
```sql
-- ××™× ×“×§×¡×™× ×¢×œ ×ž×¤×ª×—×•×ª ×¨××©×™×™× (××•×˜×•×ž×˜×™×™×)
PRIMARY KEY (id) ON users
PRIMARY KEY (id) ON notices
PRIMARY KEY (id) ON images
PRIMARY KEY (id) ON styles
PRIMARY KEY (id) ON weather_cache
PRIMARY KEY (id) ON news_sources
PRIMARY KEY (id) ON news_cache
```

### ××™× ×“×§×¡×™× ×ž×©× ×™×™×:
```sql
-- ××™× ×“×§×¡×™× ×¢×œ ×ž×¤×ª×—×•×ª ×–×¨×™×
CREATE INDEX idx_notices_user_id ON notices(user_id);
CREATE INDEX idx_images_user_id ON images(user_id);
CREATE INDEX idx_styles_user_id ON styles(user_id);
CREATE INDEX idx_news_cache_source_id ON news_cache(source_id);

-- ××™× ×“×§×¡×™× ×¢×œ ×©×“×•×ª ×—×™×¤×•×©
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_street_building ON users(street_name, building_number);
CREATE INDEX idx_notices_active ON notices(is_active, start_date, end_date);
CREATE INDEX idx_images_active ON images(is_active, start_date, end_date);
CREATE INDEX idx_images_order ON images(user_id, display_order);
CREATE INDEX idx_weather_cache_location ON weather_cache(location);
CREATE INDEX idx_weather_cache_expires ON weather_cache(expires_at);
CREATE INDEX idx_news_cache_expires ON news_cache(expires_at);
```

## ðŸ” ×ž×“×™× ×™×•×ª ××‘×˜×—×” (RLS)

### ×ž×“×™× ×™×•×ª ×œ×ž×©×ª×ž×©×™×:
- ×›×œ ×ž×©×ª×ž×© ×™×›×•×œ ×œ×¨××•×ª ×•×œ×¢×¨×•×š ×¨×§ ××ª ×”× ×ª×•× ×™× ×©×œ×•
- ×ž× ×”×œ-×¢×œ ×™×›×•×œ ×œ×’×©×ª ×œ×›×œ ×”× ×ª×•× ×™×

### ×ž×“×™× ×™×•×ª ×œ×˜×‘×œ××•×ª:
```sql
-- ×”×¤×¢×œ×ª RLS
ALTER TABLE users ENABLE ROW LEVEL SECURITY;
ALTER TABLE notices ENABLE ROW LEVEL SECURITY;
ALTER TABLE images ENABLE ROW LEVEL SECURITY;
ALTER TABLE styles ENABLE ROW LEVEL SECURITY;

-- ×ž×“×™× ×™×•×ª ×’×™×©×”
CREATE POLICY "Users can view own data" ON users
  FOR SELECT USING (auth.uid() = id);

CREATE POLICY "Users can update own data" ON users
  FOR UPDATE USING (auth.uid() = id);

CREATE POLICY "Users can manage own notices" ON notices
  FOR ALL USING (auth.uid() = user_id);

CREATE POLICY "Users can manage own images" ON images
  FOR ALL USING (auth.uid() = user_id);

CREATE POLICY "Users can manage own styles" ON styles
  FOR ALL USING (auth.uid() = user_id);
```

## ðŸ“ˆ ×ª×¦×•×’×•×ª (Views) ×©×™×ž×•×©×™×•×ª

### ×ª×¦×•×’×ª ×ª×•×›×Ÿ ×¤×¢×™×œ:
```sql
CREATE VIEW active_content AS
SELECT 
    u.id as user_id,
    u.street_name,
    u.building_number,
    n.message_text,
    n.start_date as notice_start,
    n.end_date as notice_end,
    i.file_path as image_path,
    i.display_order,
    i.start_date as image_start,
    i.end_date as image_end,
    s.background_color,
    s.text_color,
    s.layout_type,
    s.text_size,
    s.slide_duration
FROM users u
LEFT JOIN notices n ON u.id = n.user_id AND n.is_active = TRUE 
    AND (n.end_date IS NULL OR n.end_date > NOW())
LEFT JOIN images i ON u.id = i.user_id AND i.is_active = TRUE 
    AND (i.end_date IS NULL OR i.end_date > NOW())
LEFT JOIN styles s ON u.id = s.user_id
WHERE u.is_active = TRUE;
```

### ×ª×¦×•×’×ª ×¡×˜×˜×™×¡×˜×™×§×•×ª:
```sql
CREATE VIEW user_statistics AS
SELECT 
    u.id,
    u.street_name,
    u.building_number,
    COUNT(n.id) as active_notices,
    COUNT(i.id) as active_images,
    s.layout_type,
    s.text_size
FROM users u
LEFT JOIN notices n ON u.id = n.user_id AND n.is_active = TRUE
LEFT JOIN images i ON u.id = i.user_id AND i.is_active = TRUE
LEFT JOIN styles s ON u.id = s.user_id
WHERE u.is_active = TRUE
GROUP BY u.id, u.street_name, u.building_number, s.layout_type, s.text_size;
``` 